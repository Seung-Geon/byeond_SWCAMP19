<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <title>Document</title>
</head>
<body>
    <!-- v-for: 배열을 기준으로 목록을 렌더링하는 지시문(directive)이다. -->
    <div id="step01">
        <h5>과일과게</h5>
        <ul>
            <li v-for="item in items">{{ item }}</li>
        </ul>
    </div>
    
    <!-- 객체를 기준으로도 사용할 수 있으며 객체가 가진 프로퍼티를 순회하며 활용할 수 있다. -->
    <div id="step02">
        <ul>
            <li v-for = "info in profile">
                {{ info }}
            </li>

            <!-- v-for의 ()에 쓰는 값은 순서를 지켜야 한다. -->
            <li v-for = "(value, key, index) in profile">
                {{ index }}:{{ key }}:{{ value }} 
            </li>
        </ul>
    </div>

    <!-- 
        별도의 data 없이 범위만 있는 loop 렌더링
        (지시자가 작동하게 할려면 뷰 인스턴스는 필요하다.)
        (뷰 인스턴스: script의 createApp 부분)
    -->
    <div id="step03">
        <ul>
            <li v-for = "n in 10">
                {{ n }}
            </li>
        </ul>
    </div>

    <!-- 반복과 조건을 같이 할 땐 가급적 template을 활용해서 다른 태그형태로 구현할 것! -->
    <div id="step04">
        <ul>
            <!-- 
                v-for와 v-if는 하나의 태그로 표현할 수 없다(v-if에서 item이 인식 안됨)
                
                v-for와 v-if가 같이 있으면 v-for의 item을 아직 인지하지 못한 상태이기 때문에
                v-if에서 item. 을 활용하지 못함
            -->
            
            <template v-for = "item in items">
                <li v-if = "item.state">
                    {{ item.name }}
                </li>
            </template>
        </ul>
    </div>

    <!-- 
        :key 
        Vue가 렌더링된 요소 목록을 업데이트 할 때 v-for는 기본적으로 반복되어 나온 DOM 요소들 전체를 확인하게 된다.
        이 때 Vue가 각 노드의 id를 추적할 수 있도록 힌트를 주고 기존 요소를 재사용하여 순서를 변경함에 있어
        용이하게 하기 위해서 key라는 정보를 제공하면 성능상 이점을 가져갈 수 있다.
        (사실상 반복문에서 필수로 적게 된다.)
    -->
    <div id="step05">
        <div v-for = "item in items" :key="item.id">
            {{ item.id }} - {{ item.name }}
        </div>
    </div>

    <script>
        const {createApp, ref, reactive} = Vue;

        createApp({
            setup() {
                const items = ref(['Apple', 'PineApple', 'Melon', 'WaterMelon']);
                return {
                    items
                };
            }
        }).mount("#step01");


        createApp({
            setup() {
                const profile = reactive({
                    name: '홍길동',
                    address: '서울시 강남구',
                    intorduction: 'vue 전문가이면서 외로움'
                });

                return {
                    profile
                };
            }
        }).mount("#step02");


        createApp({
            setup() {return {};}
        }).mount("#step03");

        createApp({
            setup() {
                const items = ref([
                    {name: 'apple', state: true},
                    {name: 'pineApple', state: false},
                    {name: 'melon', state: true},
                    {name: 'watermelon', state: true},            
                ])                
                return {
                    items
                };
            }
        }).mount("#step04");

        createApp({
            setup() {
                const items = ref([
                    {id: 1, name: 'apple', state: true},
                    {id: 2, name: 'pineApple', state: false},
                    {id: 3, name: 'melon', state: true},
                    {id: 4, name: 'watermelon', state: true},            
                ])                
                return {
                    items
                };
            }
        }).mount("#step05");
    </script>
</body>
</html>